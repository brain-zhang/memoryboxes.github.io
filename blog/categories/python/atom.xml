<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Python | memoryboxes blog]]></title>
  <link href="http://memoryboxes.github.io/blog/categories/python/atom.xml" rel="self"/>
  <link href="http://memoryboxes.github.io/"/>
  <updated>2015-03-04T18:53:05+08:00</updated>
  <id>http://memoryboxes.github.io/</id>
  <author>
    <name><![CDATA[memoryboxes]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Pycon2014 in Shanghai]]></title>
    <link href="http://memoryboxes.github.io/blog/2014/11/16/pycon2017-in-shanghai/"/>
    <updated>2014-11-16T12:19:21+08:00</updated>
    <id>http://memoryboxes.github.io/blog/2014/11/16/pycon2017-in-shanghai</id>
    <content type="html"><![CDATA[<p>今年又去打酱油了。在上海有这点好处，可以很方便的找到各种组织~~~</p>

<p>去年拿了个帽子，今年发了件T恤，明年来条短裤就套装啦。</p>

<p>这次Pycon非常赞，上海的组织者真用心，这次无论是演讲还是气氛都很到位。志愿者们真的辛苦了，十二分的敬礼。</p>

<p>讲的内容有几点让我很惊艳的:</p>

<ul>
<li><p>讲协程的时候提到，函数的返回值不必返回给调用者，可以返回给三方，很有启发</p></li>
<li><p>黄冬老师讲测试3层设备或者网站性能的最好办法，是把一段时间的DDOS发包抓下来，或者造出一堆SYN，直接用tcpreplay打到目标机上。很好很粗暴，也很有效</p></li>
<li><p>关于OpenCL在数据计算领域的应用，让我有点吃惊，已经这么易用了，回头要看看</p></li>
<li><p>以前一直听人说postgresql怎么怎么好，这次又被强化了一遍，这个也要研究研究</p></li>
<li><p>中间看到有演讲者调试程序用lldb，之前我一直以为它不靠谱，貌似已经很成熟了</p></li>
<li><p>机器学习讲的简洁明了，让我这个门外汉也听得津津有味</p></li>
<li><p>中间的台湾演讲同五地互动的创举，太有想法了，虽然效果不理想，但我想说太Cool了，未来的大会互动会更多元，更精彩，为这个尝试鼓掌</p></li>
<li><p>主持人非常专业，聪敏又风趣，可以直接上央视啦</p></li>
</ul>


<p>还有几点不足的:</p>

<ul>
<li><p>话筒时好时不好，这个估计让大家有点提心吊胆的。这个是经验啊，以后组织类似的活动话筒要多多益善，还要多备电池。</p></li>
<li><p>Django和创业的两个议题都有点浅，太多讲Python的ABC了，这方面的内容可以收缩下</p></li>
</ul>


<p>另外有点Confuse，会上有人提到用libpcap抓包分析网络流的，黄冬老师说性能没问题。其实我们这测试下来，绑定CPU抓包，libpcap通常的性能就在单网卡400Mbps左右。
如果用Zero Copy的话，可能性能有提升，但也不会太高。目前抓流量效率最好的是Intel的DPDK，可以到10Gbps。</p>

<p>还有魔豆提到用Selenium做自动化测试的事情，我用Selenium觉得，他的适用场景在WEB UI很少变化，并且页面结构简单的企业软件，像传统的路由器管理界面这样的东西，用它的录制测试还是可以的。
但是界面稍微个性化一些，想让测试代码长久，必须手写代码，而且是简单可靠的代码，不能单纯追求覆盖率。Selenium的测试代码虽然好写，但也容易废弃，要想写的简单可靠还是很有难度的。</p>

<p>关于UI测试，我的想法就是，尽量降低编写成本，如果一个UI测试挂了，你不能在5分钟之内修复它，直接丢弃掉！编写UI自动化测试的成本不应该超过5分钟，如果一个测试要频繁维护，那么，是重新写一个的时候了。
要想达到这个目标，我想到的简单解决方案就是图像DIFF，facebook之前出过一个huxley，我很有兴趣的研究过，还PULL过代码，但这个东西还是离我心目中的自动化图像DIFF有距离。后来又自己写了一个能把每天的测试结果保存下来，并能基于时间查看对比的东东，但效果也不好。</p>

<p>我想象中的web UI自动测试是这样的:</p>

<ul>
<li><p>支持比较模板点自定义</p>

<p>  对比的截图可以是基于录制时间最早的case的，如果中途重新录制，提供用户自定义机制。</p></li>
<li><p>支持时间轴功能</p>

<p>  1、查询时间范围的灵活选择，可以很简洁的查询某段时间、或某个时间点的case.</p>

<p>  2、可以在时间轴上直接修改比较模板的base时间点</p>

<p>  3、以不同颜色标识base时间点、pass的测试、fail的测试以及fail的个数，测试名称等</p></li>
<li><p>比较智能的图像DIFF算法:</p>

<p>  1、首先要能忽略指定区域，因为有些区域能够预测到是不断变化的。</p>

<p>  2、能对整张图、或某几个区域提供多个选择，如果符合其中一个我们就认为是OK的</p>

<p>  3、能提供组件级的识别，比如某个button，某个搜索框等等，一张截图里面如果所有指定的组件都OK，我们就认为是OK的。</p></li>
</ul>


<p>最后感概下，Pycon一年比一年进步，志愿者们功不可没。对于他们的工作，怎么赞誉都不过分。非常感谢!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[python2.x：Error When Printing an Exception Containing a Unicode String]]></title>
    <link href="http://memoryboxes.github.io/blog/2014/09/17/python2-dot-x%3Aerror-when-printing-an-exception-containing-a-unicode-string/"/>
    <updated>2014-09-17T08:43:39+08:00</updated>
    <id>http://memoryboxes.github.io/blog/2014/09/17/python2-dot-x:error-when-printing-an-exception-containing-a-unicode-string</id>
    <content type="html"><![CDATA[<p>Python2.x中抛出Unicode的异常需要注意:</p>

<p>```</p>

<blockquote><blockquote><blockquote><p>try:
&hellip;     raise Exception(u'Error when printing 中文异常')
&hellip; except Exception, e:
&hellip;     print e
&hellip;     print str(e)
```
会报UnicodeEncodeError: &lsquo;ascii&rsquo; codec can&rsquo;t encode character &hellip;</p></blockquote></blockquote></blockquote>

<p>同样，如果在log中直接输出，也会报错</p>

<p>```</p>

<blockquote><blockquote><blockquote><p>import logging</p>

<pre><code>logger = logging.getLogger('default')
try:
</code></pre>

<p>&hellip;     raise Exception(u'Error when printing 中文异常')
&hellip; except Exception, e:
&hellip;     logger.error(e)
&hellip;     logger.error(&ldquo;%s&rdquo;, e)
&hellip;     logger.error(&ldquo;%s&rdquo;, str(e))
```</p></blockquote></blockquote></blockquote>

<p>简单的解决办法就是用e.message</p>

<p>```</p>

<blockquote><blockquote><blockquote><p>try:
&hellip;     raise Exception(u'Error when printing 中文异常')
&hellip; except Exception, e:
&hellip;     print e.message
&hellip;     print &ldquo;%s&rdquo; % e.message
```</p></blockquote></blockquote></blockquote>

<p>也可以详细的可以指定encoder</p>

<p>```</p>

<blockquote><blockquote><blockquote><p>try:
&hellip;     raise Exception(u'Error when printing 中文异常')
&hellip; except Exception, e:
&hellip;     print unicode(e.message).encode(&lsquo;utf-8&rsquo;)
```</p></blockquote></blockquote></blockquote>

<p>Python3就没这个事了，备忘一下。</p>

<p>参考:</p>

<p><a href="http://bugs.python.org/issue2517">http://bugs.python.org/issue2517</a></p>
]]></content>
  </entry>
  
</feed>
